(function(){"use strict";var e={9068:function(e,t,n){var r=n(5130),a=n(6768),o=n(144),s=n(4232);const u={class:"app-header"},i={key:0,class:"subtitle"},l={key:1,class:"subtitle"};function c(e,t,n,r,o,c){return(0,a.uX)(),(0,a.CE)("header",u,[t[0]||(t[0]=(0,a.Lk)("h1",null,"Paws & Preferences",-1)),n.isFinished?((0,a.uX)(),(0,a.CE)("p",l," You liked "+(0,s.v_)(n.likedCount)+" out of "+(0,s.v_)(n.totalCount)+" cats ðŸ¾ ",1)):((0,a.uX)(),(0,a.CE)("p",i," Swipe right to like, left to dislike. "))])}var d={name:"AppHeader",props:{isFinished:{type:Boolean,required:!0},likedCount:{type:Number,required:!0},totalCount:{type:Number,required:!0}}},v=n(1241);const p=(0,v.A)(d,[["render",c],["__scopeId","data-v-44e3d214"]]);var f=p;const g={class:"cat-card-stack"},k={class:"cat-card-area"},y=["src"],h=["src"],C={key:0,class:"badge badge--like"},m={key:1,class:"badge badge--nope"};function b(e,t,n,r,o,u){const i=(0,a.g2)("ProgressBar");return(0,a.uX)(),(0,a.CE)("section",g,[(0,a.Lk)("div",k,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(r.remainingCats,(e,t)=>((0,a.uX)(),(0,a.CE)("div",{key:e.id,class:"cat-card cat-card--background",style:(0,s.Tr)(r.backgroundStyle(t))},[(0,a.Lk)("img",{src:e.url,alt:"Cute cat",loading:"lazy"},null,8,y)],4))),128)),r.activeCat?((0,a.uX)(),(0,a.CE)("div",{key:0,class:"cat-card cat-card--active",style:(0,s.Tr)(r.activeCardStyle),onMousedown:t[0]||(t[0]=e=>r.onDragStart(e)),onTouchstartPassive:t[1]||(t[1]=e=>r.onDragStart(e)),onMousemove:t[2]||(t[2]=e=>r.onDragMove(e)),onTouchmovePassive:t[3]||(t[3]=e=>r.onDragMove(e)),onMouseup:t[4]||(t[4]=(...e)=>r.onDragEnd&&r.onDragEnd(...e)),onMouseleave:t[5]||(t[5]=(...e)=>r.onDragEnd&&r.onDragEnd(...e)),onTouchend:t[6]||(t[6]=(...e)=>r.onDragEnd&&r.onDragEnd(...e))},[(0,a.Lk)("img",{src:r.activeCat.url,alt:"Cute cat"},null,8,h),r.dragX>40?((0,a.uX)(),(0,a.CE)("div",C," LIKE ")):(0,a.Q3)("",!0),r.dragX<-40?((0,a.uX)(),(0,a.CE)("div",m," NOPE ")):(0,a.Q3)("",!0)],36)):(0,a.Q3)("",!0)]),(0,a.bF)(i,{current:Math.min(n.currentIndex+1,n.cats.length),total:n.cats.length},null,8,["current","total"])])}function E({getHasActiveCard:e,onSwipe:t}){const n=(0,o.KR)(!1),r=(0,o.KR)(0),s=(0,o.KR)(0),u=(0,o.KR)(0),i=(0,o.KR)(0),l=(0,a.EW)(()=>{const e=u.value,t=i.value,r=.08*e;return{transform:`translateX(-50%) translate(${e}px, ${t}px) rotate(${r}deg)`,transition:n.value?"none":"transform 0.25s ease-out"}}),c=e=>{const t=1-.03*e;return{top:4*e+"px",transform:`translateX(-50%) scale(${t})`}};function d(e){return e.touches&&e.touches[0]?{x:e.touches[0].clientX,y:e.touches[0].clientY}:{x:e.clientX,y:e.clientY}}function v(t){if(!e())return;n.value=!0;const{x:a,y:o}=d(t);r.value=a,s.value=o,u.value=0,i.value=0}function p(e){if(!n.value)return;const{x:t,y:a}=d(e);u.value=t-r.value,i.value=a-s.value}function f(){if(!n.value)return;n.value=!1;const e=80;u.value>e?g(!0):u.value<-e?g(!1):(u.value=0,i.value=0)}function g(n){if(!e())return;const r=n?1:-1;u.value=500*r,i.value=.3*i.value,setTimeout(()=>{u.value=0,i.value=0,t(n)},200)}return{dragX:u,dragY:i,activeCardStyle:l,backgroundStyle:c,onDragStart:v,onDragMove:p,onDragEnd:f}}const X={class:"progress"},w={class:"progress-bar"},x={class:"progress-text"};function _(e,t,n,r,o,u){return(0,a.uX)(),(0,a.CE)("div",X,[(0,a.Lk)("div",w,[(0,a.Lk)("div",{class:"progress-bar__fill",style:(0,s.Tr)({width:r.progress+"%"})},null,4)]),(0,a.Lk)("span",x,(0,s.v_)(n.current)+" / "+(0,s.v_)(n.total),1)])}var S={name:"ProgressBar",props:{current:{type:Number,required:!0},total:{type:Number,required:!0}},setup(e){const t=(0,a.EW)(()=>{if(0===e.total)return 0;const t=e.current/e.total*100;return Math.min(100,Math.max(0,t))});return{progress:t}}};const L=(0,v.A)(S,[["render",_],["__scopeId","data-v-4f87ee68"]]);var R=L,D={name:"CatSwipeStack",components:{ProgressBar:R},props:{cats:{type:Array,required:!0},currentIndex:{type:Number,required:!0}},emits:["swipe"],setup(e,{emit:t}){const n=(0,a.EW)(()=>e.cats[e.currentIndex]||null),r=(0,a.EW)(()=>e.cats.slice(e.currentIndex+1,e.currentIndex+3)),{dragX:o,activeCardStyle:s,backgroundStyle:u,onDragStart:i,onDragMove:l,onDragEnd:c}=E({getHasActiveCard:()=>!!n.value,onSwipe:e=>t("swipe",{isLike:e})});return{activeCat:n,remainingCats:r,dragX:o,activeCardStyle:s,backgroundStyle:u,onDragStart:i,onDragMove:l,onDragEnd:c}}};const I=(0,v.A)(D,[["render",b],["__scopeId","data-v-0aff0603"]]);var M=I;const F={class:"summary"},K={key:0,class:"center-box"},O={key:1,class:"summary-grid"},T=["src"],$={key:2,class:"summary-actions"};function A(e,t,n,r,o,s){return(0,a.uX)(),(0,a.CE)("section",F,[t[3]||(t[3]=(0,a.Lk)("h2",null,"Your favourite kitties",-1)),0===n.likedCats.length?((0,a.uX)(),(0,a.CE)("div",K,[t[2]||(t[2]=(0,a.Lk)("p",null,"You didnâ€™t like any cats this time. Tough crowd!",-1)),(0,a.Lk)("button",{class:"btn primary",onClick:t[0]||(t[0]=t=>e.$emit("restart"))}," Start over ")])):((0,a.uX)(),(0,a.CE)("div",O,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(n.likedCats,e=>((0,a.uX)(),(0,a.CE)("div",{key:e.id,class:"summary-card"},[(0,a.Lk)("img",{src:e.url,alt:"Liked cat",loading:"lazy"},null,8,T)]))),128))])),n.likedCats.length>0?((0,a.uX)(),(0,a.CE)("div",$,[(0,a.Lk)("button",{class:"btn secondary",onClick:t[1]||(t[1]=t=>e.$emit("restart"))}," Try again with new cats ")])):(0,a.Q3)("",!0)])}var P={name:"CatSummary",props:{likedCats:{type:Array,required:!0}},emits:["restart"]};const W=(0,v.A)(P,[["render",A],["__scopeId","data-v-31a102c8"]]);var q=W;n(8111),n(2489),n(1701);const j=12,N="https://cataas.com",Y=500;function z(){const e=(0,o.KR)([]),t=(0,o.KR)(0),n=(0,o.KR)(!0),r=(0,o.KR)(null),s=(0,a.EW)(()=>e.value[t.value]||null),u=(0,a.EW)(()=>!n.value&&t.value>=e.value.length),i=(0,a.EW)(()=>e.value.filter(e=>e.liked));async function l(){n.value=!0,r.value=null,e.value=[],t.value=0;try{const t=Math.floor(Math.random()*Y),n=`${N}/api/cats?skip=${t}&limit=${j}`,r=await fetch(n);if(!r.ok)throw new Error("Failed to fetch cats list");const a=await r.json();e.value=a.map((e,t)=>{const n=e._id||e.id||`fallback-${t}`;return{id:n,url:`${N}/cat/${n}?width=600&height=600`,liked:null}})}catch(a){console.error(a),r.value="Failed to load cats. Please try again."}finally{n.value=!1}}function c(e){s.value&&(s.value.liked=e,t.value+=1)}return(0,a.sV)(l),{cats:e,currentIndex:t,isLoading:n,error:r,activeCat:s,isFinished:u,likedCats:i,loadCats:l,handleSwipe:c}}const B={class:"app"},Q={key:0,class:"center-box"},H={key:1,class:"center-box"},V={class:"error"},G={key:2,class:"content"};var J={__name:"App",setup(e){const{cats:t,currentIndex:n,isLoading:r,error:u,isFinished:i,likedCats:l,loadCats:c,handleSwipe:d}=z();function v(){c()}function p(e){d(e.isLike)}return(e,c)=>((0,a.uX)(),(0,a.CE)("div",B,[(0,a.bF)(f,{isFinished:(0,o.R1)(i),likedCount:(0,o.R1)(l).length,totalCount:(0,o.R1)(t).length},null,8,["isFinished","likedCount","totalCount"]),(0,o.R1)(r)?((0,a.uX)(),(0,a.CE)("div",Q,[...c[0]||(c[0]=[(0,a.Lk)("p",null,"Loading purr-fect kittiesâ€¦",-1)])])):(0,o.R1)(u)?((0,a.uX)(),(0,a.CE)("div",H,[(0,a.Lk)("p",V,(0,s.v_)((0,o.R1)(u)),1),(0,a.Lk)("button",{onClick:v,class:"btn primary"},"Try again")])):((0,a.uX)(),(0,a.CE)("main",G,[(0,o.R1)(i)?((0,a.uX)(),(0,a.Wv)(q,{key:1,likedCats:(0,o.R1)(l),onRestart:v},null,8,["likedCats"])):((0,a.uX)(),(0,a.Wv)(M,{key:0,cats:(0,o.R1)(t),currentIndex:(0,o.R1)(n),onSwipe:p},null,8,["cats","currentIndex"]))]))]))}};const U=(0,v.A)(J,[["__scopeId","data-v-394f3988"]]);var Z=U;(0,r.Ef)(Z).mount("#app")}},t={};function n(r){var a=t[r];if(void 0!==a)return a.exports;var o=t[r]={exports:{}};return e[r].call(o.exports,o,o.exports,n),o.exports}n.m=e,function(){var e=[];n.O=function(t,r,a,o){if(!r){var s=1/0;for(c=0;c<e.length;c++){r=e[c][0],a=e[c][1],o=e[c][2];for(var u=!0,i=0;i<r.length;i++)(!1&o||s>=o)&&Object.keys(n.O).every(function(e){return n.O[e](r[i])})?r.splice(i--,1):(u=!1,o<s&&(s=o));if(u){e.splice(c--,1);var l=a();void 0!==l&&(t=l)}}return t}o=o||0;for(var c=e.length;c>0&&e[c-1][2]>o;c--)e[c]=e[c-1];e[c]=[r,a,o]}}(),function(){n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,{a:t}),t}}(),function(){n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={524:0};n.O.j=function(t){return 0===e[t]};var t=function(t,r){var a,o,s=r[0],u=r[1],i=r[2],l=0;if(s.some(function(t){return 0!==e[t]})){for(a in u)n.o(u,a)&&(n.m[a]=u[a]);if(i)var c=i(n)}for(t&&t(r);l<s.length;l++)o=s[l],n.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return n.O(c)},r=self["webpackChunknetizen_experience"]=self["webpackChunknetizen_experience"]||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))}();var r=n.O(void 0,[504],function(){return n(9068)});r=n.O(r)})();
//# sourceMappingURL=app.d0fb1837.js.map