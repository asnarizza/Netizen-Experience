{"ast":null,"code":"import \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.filter.js\";\nimport \"core-js/modules/es.iterator.map.js\";\n// src/composables/useCats.js\nimport { ref, computed, onMounted } from 'vue';\nconst TOTAL_CATS = 12;\nconst API_BASE = 'https://cataas.com';\nconst MAX_SKIP = 500;\n\n/**\r\n * Composable responsible for:\r\n * - Loading cats from the Cataas API\r\n * - Tracking the current index\r\n * - Tracking liked cats\r\n * - Exposing loading and error state\r\n */\nexport function useCats() {\n  const cats = ref([]);\n  const currentIndex = ref(0);\n  const isLoading = ref(true);\n  const error = ref(null);\n  const activeCat = computed(() => cats.value[currentIndex.value] || null);\n  const isFinished = computed(() => !isLoading.value && currentIndex.value >= cats.value.length);\n  const likedCats = computed(() => cats.value.filter(c => c.liked));\n  async function loadCats() {\n    isLoading.value = true;\n    error.value = null;\n    cats.value = [];\n    currentIndex.value = 0;\n    try {\n      // Optional tags: could be something like 'cute,kitten'\n      const tags = '';\n      const tagParam = tags ? `tags=${encodeURIComponent(tags)}&` : '';\n\n      // Random skip value so each reload presents a different subset of cats\n      const randomSkip = Math.floor(Math.random() * MAX_SKIP);\n      const url = `${API_BASE}/api/cats?${tagParam}skip=${randomSkip}&limit=${TOTAL_CATS}`;\n      const res = await fetch(url);\n      if (!res.ok) {\n        throw new Error('Failed to fetch cats list');\n      }\n      const data = await res.json(); // array of cat objects from API\n\n      // Normalize API result into a simple model used by the app\n      cats.value = data.map((cat, index) => {\n        const id = cat._id || cat.id || `fallback-${index}`;\n        return {\n          id,\n          // Stable URL for each cat with fixed width/height\n          url: `${API_BASE}/cat/${id}?width=600&height=600`,\n          liked: null // null means not yet rated\n        };\n      });\n    } catch (e) {\n      console.error(e);\n      error.value = 'Failed to load cats. Please try again.';\n    } finally {\n      isLoading.value = false;\n    }\n  }\n\n  /**\r\n   * Apply a swipe result (like/dislike) to the current cat\r\n   * and advance the index.\r\n   */\n  function handleSwipe(isLike) {\n    if (!activeCat.value) return;\n    activeCat.value.liked = isLike;\n    currentIndex.value += 1;\n  }\n  onMounted(loadCats);\n  return {\n    // state\n    cats,\n    currentIndex,\n    isLoading,\n    error,\n    // derived\n    activeCat,\n    isFinished,\n    likedCats,\n    // actions\n    loadCats,\n    handleSwipe\n  };\n}","map":{"version":3,"names":["ref","computed","onMounted","TOTAL_CATS","API_BASE","MAX_SKIP","useCats","cats","currentIndex","isLoading","error","activeCat","value","isFinished","length","likedCats","filter","c","liked","loadCats","tags","tagParam","encodeURIComponent","randomSkip","Math","floor","random","url","res","fetch","ok","Error","data","json","map","cat","index","id","_id","e","console","handleSwipe","isLike"],"sources":["C:/Users/User/netizen_experience/src/composables/useCats.js"],"sourcesContent":["// src/composables/useCats.js\r\nimport { ref, computed, onMounted } from 'vue';\r\n\r\nconst TOTAL_CATS = 12;\r\nconst API_BASE = 'https://cataas.com';\r\nconst MAX_SKIP = 500;\r\n\r\n/**\r\n * Composable responsible for:\r\n * - Loading cats from the Cataas API\r\n * - Tracking the current index\r\n * - Tracking liked cats\r\n * - Exposing loading and error state\r\n */\r\nexport function useCats() {\r\n  const cats = ref([]);\r\n  const currentIndex = ref(0);\r\n  const isLoading = ref(true);\r\n  const error = ref(null);\r\n\r\n  const activeCat = computed(\r\n    () => cats.value[currentIndex.value] || null\r\n  );\r\n\r\n  const isFinished = computed(\r\n    () => !isLoading.value && currentIndex.value >= cats.value.length\r\n  );\r\n\r\n  const likedCats = computed(() =>\r\n    cats.value.filter((c) => c.liked)\r\n  );\r\n\r\n  async function loadCats() {\r\n    isLoading.value = true;\r\n    error.value = null;\r\n    cats.value = [];\r\n    currentIndex.value = 0;\r\n\r\n    try {\r\n      // Optional tags: could be something like 'cute,kitten'\r\n      const tags = '';\r\n      const tagParam = tags ? `tags=${encodeURIComponent(tags)}&` : '';\r\n\r\n      // Random skip value so each reload presents a different subset of cats\r\n      const randomSkip = Math.floor(Math.random() * MAX_SKIP);\r\n\r\n      const url = `${API_BASE}/api/cats?${tagParam}skip=${randomSkip}&limit=${TOTAL_CATS}`;\r\n\r\n      const res = await fetch(url);\r\n      if (!res.ok) {\r\n        throw new Error('Failed to fetch cats list');\r\n      }\r\n\r\n      const data = await res.json(); // array of cat objects from API\r\n\r\n      // Normalize API result into a simple model used by the app\r\n      cats.value = data.map((cat, index) => {\r\n        const id = cat._id || cat.id || `fallback-${index}`;\r\n\r\n        return {\r\n          id,\r\n          // Stable URL for each cat with fixed width/height\r\n          url: `${API_BASE}/cat/${id}?width=600&height=600`,\r\n          liked: null // null means not yet rated\r\n        };\r\n      });\r\n    } catch (e) {\r\n      console.error(e);\r\n      error.value = 'Failed to load cats. Please try again.';\r\n    } finally {\r\n      isLoading.value = false;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Apply a swipe result (like/dislike) to the current cat\r\n   * and advance the index.\r\n   */\r\n  function handleSwipe(isLike) {\r\n    if (!activeCat.value) return;\r\n    activeCat.value.liked = isLike;\r\n    currentIndex.value += 1;\r\n  }\r\n\r\n  onMounted(loadCats);\r\n\r\n  return {\r\n    // state\r\n    cats,\r\n    currentIndex,\r\n    isLoading,\r\n    error,\r\n\r\n    // derived\r\n    activeCat,\r\n    isFinished,\r\n    likedCats,\r\n\r\n    // actions\r\n    loadCats,\r\n    handleSwipe\r\n  };\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}